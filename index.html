<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>GA Test</title>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <!--<script async src="https://www.googletagmanager.com/gtag/js?id=UA-141509620-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'UA-141509620-1');
    </script>-->


    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-146885857-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'UA-146885857-1');
    </script>

    <style>
        body {
            color: white;
            background: black;
            text-align: center;
        }
        .box {
            margin: 50px auto;
            max-width: 500px;
        }
        a {
            color: #eee;
        }
    </style>
</head>
<body>

    <div class="box">
        <h1>Haha!</h1>
        <p>
            <a id="buyButton" href="javascript:void(0);" target="_blank" style="visibility: hidden;">Buy Now</a>
        </p>
        <p>
            <a id="cartButton" href="javascript:void(0);" target="_blank" style="display: none;">Add to Cart</a>
        </p>
    </div>

    <!--<div class="box">
        <video id="Fall" style="max-width: 100%; height: auto;"
                controls
               preload="preload"
               src="1.mp4"
               onclick="console.log('play');
               gtag('event', 'play', {
                        'event_category': 'Videos',
                        'event_label': 'Fall'
                    });
"
        >
            Your browser does not support the <code>video</code> element.
        </video>
    </div>-->

    <script>
        // 详情页购买按钮
        var buyButton = document.querySelector('#buyButton');
        if(buyButton) {
            try {
                buyButton.onclick = function handleOutboundLinkClicks (event) {
                    console.log('Buy Now');
                    gtag('event', 'click', {
                        'event_category': 'buy',
                        'event_label': 'buyButton'
                    });
                }
            } catch (err) {
                window.console && console.log(err);
            }
        }

        // 详情页加入购物车
        var cartButton = document.querySelector('#cartButton');
        if(cartButton) {
            try {
                cartButton.onclick = function handleOutboundLinkClicks (event) {
                    console.log('Add cart');
                    gtag('event', 'click', {
                        'event_category': 'Add to Cart',
                        'event_label': 'cartButton'
                    });
                }
            } catch (err) {
                window.console && console.log(err);
            }
        }

        // 购物车checkout
        var checkoutBtn = document.querySelector('#checkoutBtn');
        if(checkoutBtn) {
            try {
                gtag('event', 'click', {
                    'event_category': 'checkout',
                    'event_label': 'checkoutBtn'
                });
            } catch (err) {
                window.console && console.log(err);
            }
        }

        // buyButton.onclick();
        // cartButton.onclick();

        // 非互动事件:付款成功
        try {
            console.log('paid_success');
            gtag('event', 'paid_success', {
                'event_category': 'Paid Success',
                'event_label': 'paidSuccessButton',
                'non_interaction': true
            });
        } catch (err) {
            window.console && console.log(err);
        }



    </script>

</body>
</html>
